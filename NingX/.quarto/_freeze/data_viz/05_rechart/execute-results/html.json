{
  "hash": "c6c8ab076c9133cb5eb92b0783ce52ff",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Presidential Approval Ratings\"\nformat: \n  html:\n    echo: false\n    embed-resources: true\ninclude-in-header:\n      - text: |\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js\"></script>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js\"></script>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js\"></script>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js\"></script>\n            <script src=\"https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js\"></script>\n---\n\n<script>const presidentsData = [{\"name\": \"Barack Obama\", \"years\": \"2009-17\", \"data\": [{\"month\": 0, \"approval\": 65, \"disapproval\": 35}, {\"month\": 12, \"approval\": 47, \"disapproval\": 45}, {\"month\": 24, \"approval\": 45, \"disapproval\": 47}, {\"month\": 36, \"approval\": 48, \"disapproval\": 46}, {\"month\": 48, \"approval\": 50, \"disapproval\": 45}]}, {\"name\": \"Ronald Reagan\", \"years\": \"1981-89\", \"data\": [{\"month\": 0, \"approval\": 55, \"disapproval\": 40}, {\"month\": 12, \"approval\": 48, \"disapproval\": 42}, {\"month\": 24, \"approval\": 42, \"disapproval\": 45}, {\"month\": 36, \"approval\": 48, \"disapproval\": 40}, {\"month\": 48, \"approval\": 52, \"disapproval\": 38}]}, {\"name\": \"Richard Nixon\", \"years\": \"1969-74\", \"data\": [{\"month\": 0, \"approval\": 58, \"disapproval\": 45}, {\"month\": 12, \"approval\": 52, \"disapproval\": 42}, {\"month\": 24, \"approval\": 50, \"disapproval\": 40}, {\"month\": 36, \"approval\": 48, \"disapproval\": 38}, {\"month\": 48, \"approval\": 55, \"disapproval\": 35}]}, {\"name\": \"George H.W. Bush\", \"years\": \"1989-93\", \"data\": [{\"month\": 0, \"approval\": 58, \"disapproval\": 35}, {\"month\": 12, \"approval\": 70, \"disapproval\": 38}, {\"month\": 24, \"approval\": 75, \"disapproval\": 40}, {\"month\": 36, \"approval\": 45, \"disapproval\": 42}, {\"month\": 48, \"approval\": 35, \"disapproval\": 45}]}, {\"name\": \"Jimmy Carter\", \"years\": \"1977-81\", \"data\": [{\"month\": 0, \"approval\": 65, \"disapproval\": 50}, {\"month\": 12, \"approval\": 50, \"disapproval\": 45}, {\"month\": 24, \"approval\": 45, \"disapproval\": 42}, {\"month\": 36, \"approval\": 40, \"disapproval\": 45}, {\"month\": 48, \"approval\": 35, \"disapproval\": 40}]}, {\"name\": \"George W. Bush\", \"years\": \"2001-09\", \"data\": [{\"month\": 0, \"approval\": 50, \"disapproval\": 40}, {\"month\": 12, \"approval\": 80, \"disapproval\": 35}, {\"month\": 24, \"approval\": 65, \"disapproval\": 40}, {\"month\": 36, \"approval\": 45, \"disapproval\": 42}, {\"month\": 48, \"approval\": 48, \"disapproval\": 45}]}, {\"name\": \"Donald Trump\", \"years\": \"2017-2021\", \"data\": [{\"month\": 0, \"approval\": 45, \"disapproval\": 41}, {\"month\": 12, \"approval\": 38, \"disapproval\": 42}, {\"month\": 24, \"approval\": 40, \"disapproval\": 43}, {\"month\": 36, \"approval\": 42, \"disapproval\": 44}, {\"month\": 48, \"approval\": 39, \"disapproval\": 45}]}, {\"name\": \"Bill Clinton\", \"years\": \"1993-2001\", \"data\": [{\"month\": 0, \"approval\": 55, \"disapproval\": 40}, {\"month\": 12, \"approval\": 45, \"disapproval\": 42}, {\"month\": 24, \"approval\": 47, \"disapproval\": 40}, {\"month\": 36, \"approval\": 52, \"disapproval\": 38}, {\"month\": 48, \"approval\": 55, \"disapproval\": 35}]}, {\"name\": \"Gerald Ford\", \"years\": \"1974-77\", \"data\": [{\"month\": 0, \"approval\": 60, \"disapproval\": 50}, {\"month\": 12, \"approval\": 45, \"disapproval\": 42}, {\"month\": 24, \"approval\": 42, \"disapproval\": 40}, {\"month\": 36, \"approval\": 40, \"disapproval\": 38}]}];</script>\n\n\n```{=html}\n<div class=\"visualization-container\" style=\"position: relative; max-width: 1200px; margin: 0 auto; background-color: white;\">\n    <!-- Content to be exported -->\n    <div class=\"export-content\" style=\"background-color: white;\">\n        <div style=\"text-align: center; padding: 20px 0 30px 0;\">\n            <h1 style=\"margin: 0; font-size: 2em; color: #333;\">Presidential Approval Ratings</h1>\n            <p style=\"margin: 10px 0 0 0; font-size: 1.1em; color: #666;\">Tracking Presidential Performance Through the Years</p>\n        </div>\n        <div id=\"presidential-approval\"></div>\n    </div>\n    \n    <!-- Button container -->\n    <div style=\"text-align: right; padding: 20px;\">\n        <button id=\"export-button\" style=\"padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer;\">\n            Export as PNG\n        </button>\n    </div>\n</div>\n\n<script>\nconst { LineChart, Line, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Legend } = Recharts;\n\nconst CustomTooltip = ({ active, payload, label }) => {\n  if (active && payload && payload.length) {\n    return React.createElement('div', {\n      style: {\n        backgroundColor: 'white',\n        padding: '8px',\n        border: '1px solid #ccc',\n        borderRadius: '4px'\n      }\n    }, [\n      React.createElement('p', { key: 'year', style: { fontWeight: 'bold' } }, `Year ${label/12}`),\n      React.createElement('p', { key: 'approval' }, `Approval: ${payload[0].value}%`),\n      React.createElement('p', { key: 'disapproval', style: { color: '#4CAF50' } }, `Disapproval: ${payload[1].value}%`)\n    ]);\n  }\n  return null;\n};\n\nconst App = () => {\n  return React.createElement('div', {\n    style: {\n      display: 'grid',\n      gridTemplateColumns: 'repeat(3, 1fr)',\n      gap: '1.5rem',\n      padding: '1rem',\n      width: '100%',\n      backgroundColor: 'white'\n    }\n  }, presidentsData.map(president => \n    React.createElement('div', {\n      key: president.name,\n      style: {\n        border: '1px solid #ccc',\n        borderRadius: '8px',\n        padding: '1rem',\n        backgroundColor: 'white'\n      }\n    }, [\n      React.createElement('div', {\n        key: 'header',\n        style: { \n          fontSize: '1.125rem',\n          fontWeight: '600',\n          marginBottom: '0.25rem'\n        }\n      }, [\n        president.name,\n        React.createElement('span', {\n          key: 'years',\n          style: {\n            color: '#666',\n            fontSize: '0.875rem',\n            marginLeft: '0.5rem'\n          }\n        }, president.years)\n      ]),\n      React.createElement('div', {\n        key: 'chart',\n        style: { height: '240px' }\n      }, React.createElement(ResponsiveContainer, { width: '100%', height: '100%' },\n        React.createElement(LineChart, {\n          data: president.data,\n          margin: { top: 5, right: 30, bottom: 10, left: 5 }\n        }, [\n          React.createElement(CartesianGrid, { key: 'grid', strokeDasharray: '3 3' }),\n          React.createElement(XAxis, {\n            key: 'xaxis',\n            dataKey: 'month',\n            type: 'number',\n            domain: [0, 48],\n            ticks: [0, 12, 24, 36, 48],\n            label: { value: 'Years', position: 'bottom' }\n          }),\n          React.createElement(YAxis, {\n            key: 'yaxis',\n            domain: [20, 80],\n            ticks: [20, 50, 80]\n          }),\n          React.createElement(Tooltip, {\n            key: 'tooltip',\n            content: CustomTooltip\n          }),\n          React.createElement(Legend, {\n            key: 'legend',\n            verticalAlign: 'bottom',\n            align: 'center',\n            wrapperStyle: { paddingTop: '30px' },\n            iconType: 'circle'\n          }),\n          React.createElement(Line, {\n            key: 'approval',\n            type: 'monotone',\n            dataKey: 'approval',\n            name: 'Approval',\n            stroke: '#000000',\n            dot: false,\n            strokeWidth: 2,\n            activeDot: { r: 4 }\n          }),\n          React.createElement(Line, {\n            key: 'disapproval',\n            type: 'monotone',\n            dataKey: 'disapproval',\n            name: 'Disapproval',\n            stroke: '#4CAF50',\n            dot: false,\n            strokeWidth: 2,\n            activeDot: { r: 4 }\n          })\n        ])\n      ))\n    ])\n  ));\n};\n\n// Render the app\nconst container = document.getElementById('presidential-approval');\nconst root = ReactDOM.createRoot(container);\nroot.render(React.createElement(App));\n\n// Add export functionality\ndocument.getElementById('export-button').addEventListener('click', async () => {\n    try {\n        await new Promise(resolve => setTimeout(resolve, 500));\n        const element = document.querySelector('.visualization-container');\n        if (!element) {\n            throw new Error('Could not find the visualization container');\n        }\n        \n        const canvas = await html2canvas(element, {\n            backgroundColor: 'white',\n            scale: 2,\n            logging: true,\n            width: element.offsetWidth,\n            height: element.offsetHeight,\n            useCORS: true\n        });\n        \n        const link = document.createElement('a');\n        link.download = 'presidential_approval_ratings.png';\n        link.href = canvas.toDataURL('image/png');\n        link.click();\n    } catch (error) {\n        console.error('Error during export:', error);\n        alert('There was an error exporting the chart. Please check the console for details.');\n    }\n});\n</script>\n\n<style>\n#presidential-approval {\n  width: 100%;\n  margin: 0 auto;\n}\n\n#export-button:hover {\n  background-color: #45a049;\n}\n\n.visualization-container {\n  background-color: white;\n}\n</style>\n```\n\n",
    "supporting": [
      "05_rechart_files"
    ],
    "filters": [],
    "includes": {}
  }
}